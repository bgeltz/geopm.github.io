<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guide for Service Administrators &mdash; GEOPM  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Guide for Service Clients" href="client.html" />
    <link rel="prev" title="Guide to Service Security" href="security.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> GEOPM
            <img src="https://geopm.github.io/images/geopm-logo-clear.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="service.html">Guide for Service Users</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="service_readme.html">GEOPM Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html">Guide to Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="requires.html">Guide to Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="build.html">Guide to Source Builds</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Guide to Service Security</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Guide for Service Administrators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reading-the-access-lists">Reading the Access Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-user-access">Enabling User Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-group-access">Enabling Group Access</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="client.html">Guide for Service Clients</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Guide for HPC Runtime Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Guide for Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="devel.html">Guide for GEOPM Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference Manual</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GEOPM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="service.html">Guide for Service Users</a> &raquo;</li>
      <li>Guide for Service Administrators</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/admin.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="guide-for-service-administrators">
<h1>Guide for Service Administrators<a class="headerlink" href="#guide-for-service-administrators" title="Permalink to this headline"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> command line tool is used by a system
administrator to manage access to the features provided by the GEOPM
Service.  The GEOPM Service does not allow read or write access for
any non-root user until the system administrator explicitly configures
the service using the <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> command line tool.  This command
line interface allows the administrator to set access permissions for
all users, and may extend these default privileges for specific Unix
groups.</p>
<section id="reading-the-access-lists">
<h2>Reading the Access Lists<a class="headerlink" href="#reading-the-access-lists" title="Permalink to this headline"></a></h2>
<p>The signals and controls provided by the GEOPM Service depend on which
Linux features are avaiable, i.e. which device drivers are loaded, how
they are configured, and what hardware is installed.  The service may
be extended with IOGroup plugins which may augment the signals and
controls available through the service.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> commandline tool can be used to discover which
signals and controls are provided by the GEOPM Service on your system.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># LIST ALL SIGNALS PROVIDED</span>
geopmaccess -a

<span class="c1"># LIST ALL CONTROLS PROVIDED</span>
geopmaccess -a -c

<span class="c1"># LIST DEFAULT SIGNAL ACCESS LIST</span>
geopmaccess

<span class="c1"># LIST DEFAULT CONTROL ACCESS LIST</span>
geopmaccess -c

<span class="c1"># LIST SIGNAL ACCESS FOR A UNIX GROUP: &quot;power&quot;</span>
geopmaccess -g power

<span class="c1"># LIST CONTROL ACCESS FOR A UNIX GROUP: &quot;power&quot;</span>
geopmaccess -c -g power
</pre></div>
</div>
</section>
<section id="enabling-user-access">
<h2>Enabling User Access<a class="headerlink" href="#enabling-user-access" title="Permalink to this headline"></a></h2>
<p>This example configures the GEOPM Service to enable any user to read
and write to bits 8-15 of the MSR_PERF_CTL register which controls the
maximum frequency of the core.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># NAME OF CONTROL</span>
<span class="nv">CONTROL</span><span class="o">=</span>MSR::PERF_CTL:FREQ

<span class="c1"># CREATE TEMPORARY FILES</span>
<span class="nv">ACCESS_SIGNALS</span><span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span>
<span class="nv">ACCESS_CONTROLS</span><span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span>

<span class="c1"># SAVE INITIAL ACCESS SETTINGS</span>
geopmaccess &gt; <span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
geopmaccess -c &gt; <span class="si">${</span><span class="nv">ACCESS_CONTROLS</span><span class="si">}</span>

<span class="c1"># ADD THE CONTROL INTO ACCESS LIST FOR READING AND WRITING</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">CONTROL</span><span class="si">}</span> &gt;&gt; <span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">CONTROL</span><span class="si">}</span> &gt;&gt; <span class="si">${</span><span class="nv">ACCESS_CONTROLS</span><span class="si">}</span>
geopmaccess -w &lt; <span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
geopmaccess -w -c &lt; <span class="si">${</span><span class="nv">ACCESS_CONTROLS</span><span class="si">}</span>

<span class="c1"># CLEAN UP TEMPORARY FILES</span>
rm <span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span> <span class="si">${</span><span class="nv">ACCESS_CONTROLS</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="enabling-group-access">
<h2>Enabling Group Access<a class="headerlink" href="#enabling-group-access" title="Permalink to this headline"></a></h2>
<p>As an administrator you may want to enable access to a signal or
control for a subset of your users.  This can be accomplished by
creating a Unix user group containing the users that should be
provided this privilege.  This mechanism may also be used to extend
permissions for one particular user if the user-name-specific group is
provided.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># NAME OF SIGNAL</span>
<span class="nv">SIGNAL</span><span class="o">=</span>INSTRUCTIONS_RETIRED

<span class="c1"># NAME OF UNIX GROUP</span>
<span class="nv">GROUP_NAME</span><span class="o">=</span>perf

<span class="c1"># CREATE A TEMPORARY FILE</span>
<span class="nv">ACCESS_SIGNALS</span><span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span>

<span class="c1"># SAVE INITIAL ACCESS SETTINGS</span>
geopmaccess -g <span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span> &gt; <span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>

<span class="c1"># ADD THE SIGNAL INTO ACCESS LIST FOR READING</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">SIGNAL</span><span class="si">}</span> &gt;&gt; <span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
geopmaccess -g <span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span> -w &lt; <span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>

<span class="c1"># CLEAN UP TEMPORARY FILE</span>
rm <span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
</pre></div>
</div>
<p>Another example of using group permissions is to create a Unix group
called &quot;geopm&quot; that is granted access to all signals and controls that
are enabled on the system.  Users that should be granted full use of
the service can then be added to the geopm Unix group.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># NAME OF UNIX GROUP</span>
<span class="nv">GROUP_NAME</span><span class="o">=</span>geopm

<span class="c1"># CREATE &quot;geopm&quot; GROUP</span>
groupadd <span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span>

<span class="c1"># ENABLE GROUP TO READ ALL AVAILABLE SIGNALS</span>
geopmaccess -a <span class="p">|</span> geopmaccess -g <span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span> -w

<span class="c1"># ENABLE GROUP TO WRITE ALL AVAILABLE CONTROLS</span>
geopmaccess -a -c <span class="p">|</span> geopmaccess -g <span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span> -w -c
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="security.html" class="btn btn-neutral float-left" title="Guide to Service Security" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="client.html" class="btn btn-neutral float-right" title="Guide for Service Clients" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015 - 2022, Intel Corporation. All rights reserved..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>