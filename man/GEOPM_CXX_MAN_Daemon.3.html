<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>geopm::Daemon(3) - geopm daemon helper methods</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#NAME">NAME</a>
    <a href="#NAMESPACES">NAMESPACES</a>
    <a href="#SYNOPSIS">SYNOPSIS</a>
    <a href="#DESCRIPTION">DESCRIPTION</a>
    <a href="#FACTORY-METHOD">FACTORY METHOD</a>
    <a href="#CLASS-METHODS">CLASS METHODS</a>
    <a href="#ERRORS">ERRORS</a>
    <a href="#COPYRIGHT">COPYRIGHT</a>
    <a href="#SEE-ALSO">SEE ALSO</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>geopm::Daemon(3)</li>
    <li class='tc'></li>
    <li class='tr'>geopm::Daemon(3)</li>
  </ol>

  <h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>geopm::Daemon</code> - <span class="man-whatis">geopm daemon helper methods</span>
</p>

<h2 id="NAMESPACES">NAMESPACES</h2>

<p>The <code>Daemon</code> class is a member of the <code>namespace geopm</code>, but the
full name, <code>geopm::Daemon</code>, has been abbreviated in this manual.
Similarly, the <code>std::</code> namespace specifier has been omitted from the
interface definitions for the following standard types: <code>std::vector</code>,
<code>std::string</code>, and <code>std::set</code>, to enable better rendering of this
manual.</p>

<p>Note that the <code>Daemon</code> class is an abstract base class.  There is one
concrete implementation, <code>DaemonImp</code>.</p>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p><strong>#include <a href="https://github.com/geopm/geopm/blob/dev/src/Daemon.hpp">&lt;geopm/Daemon.hpp></a></strong></p>

<p><code>Link with -lgeopm</code> (MPI) or -lgeopmpolicy (non-MPI)`</p>

<dl>
<dt><code>void update_endpoint_from_policystore(</code></dt><dd><p><code>double</code> <em>timeout</em><code>);</code></p></dd>
<dt><code>void stop_wait_loop(</code></dt><dd><p> <code>void);</code></p></dd>
<dt><code>void reset_wait_loop(</code></dt><dd><p> <code>void);</code></p></dd>
<dt><code>unique_ptr&lt;Daemon> make_unique(</code></dt><dd><p><code>const std::string &amp;</code><em>endpoint_name</em><code>,</code> <br />
<code>const std::string &amp;</code><em>db_path</em><code>);</code></p></dd>
</dl>


<h2 id="DESCRIPTION">DESCRIPTION</h2>

<p>The <code>Daemon</code> class is the underlying C++ implementation for the
<strong><span class="man-ref">geopm_daemon_c<span class="s">(3)</span></span></strong> C interface.  Please refer to the
<strong><span class="man-ref">geopm_daemon_c<span class="s">(3)</span></span></strong> man page for a general description of the
purpose, goals, and use cases for this interface.</p>

<h2 id="FACTORY-METHOD">FACTORY METHOD</h2>

<dl>
<dt><code>make_unique</code>():</dt><dd><p></p>

<p>This method returns a unique_ptr<var>Daemon</var> to a concrete DaemonImp
object.  The shared memory prefix for the Endpoint should be given
in <em>endpoint_name</em>.  The path to the PolicyStore should be given
in <em>db_path</em>.</p></dd>
</dl>


<h2 id="CLASS-METHODS">CLASS METHODS</h2>

<dl>
<dt><code>update_endpoint_from_policystore</code>()</dt><dd><p>looks up a policy in the Daemon's PolicyStore given the attached
Controller's agent and profile name, and writes it back into the
policy side of the Daemon's Endpoint.  If no policy is found, an
error is returned.  If the Controller fails to attach within the
<em>timeout</em>, or detaches while this function is running, no policy
is written.</p></dd>
<dt><code>stop_wait_loop</code>()</dt><dd><p>exits early from any ongoing wait loops in the Daemon, for example
in a call to <code>update_endpoint_from_policystore()</code>.</p></dd>
<dt><code>reset_wait_loop</code>()</dt><dd><p>resets the Daemon's endpoint to prepare for a future wait loop.</p></dd>
</dl>


<h2 id="ERRORS">ERRORS</h2>

<p>All functions described on this man page throw <strong><a class="man-ref" href="GEOPM_CXX_MAN_Exception.3.html">geopm::Exception<span class="s">(3)</span></a></strong>
on error.</p>

<h2 id="COPYRIGHT">COPYRIGHT</h2>

<p>Copyright (c) 2015, 2016, 2017, 2018, 2019, 2020, Intel Corporation. All rights reserved.</p>

<h2 id="SEE-ALSO">SEE ALSO</h2>

<p><strong><a class="man-ref" href="geopm.7.html">geopm<span class="s">(7)</span></a></strong>,
<strong><span class="man-ref">geopm_daemon_c<span class="s">(3)</span></span></strong></p>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'>GEOPM 1.1.0+dev346gc6d64b3</li>
    <li class='tc'>June 2020</li>
    <li class='tr'>geopm::Daemon(3)</li>
  </ol>

  </div>
</body>
</html>
