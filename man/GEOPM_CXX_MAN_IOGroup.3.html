<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>geopm::IOGroup(3) - provides system values and settings</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#NAME">NAME</a>
    <a href="#NAMESPACES">NAMESPACES</a>
    <a href="#SYNOPSIS">SYNOPSIS</a>
    <a href="#DESCRIPTION">DESCRIPTION</a>
    <a href="#TERMS">TERMS</a>
    <a href="#FACTORY-ACCESSOR">FACTORY ACCESSOR</a>
    <a href="#CLASS-METHODS">CLASS METHODS</a>
    <a href="#EXAMPLE">EXAMPLE</a>
    <a href="#COPYRIGHT">COPYRIGHT</a>
    <a href="#SEE-ALSO">SEE ALSO</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>geopm::IOGroup(3)</li>
    <li class='tc'></li>
    <li class='tr'>geopm::IOGroup(3)</li>
  </ol>

  <h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>geopm::IOGroup</code> - <span class="man-whatis">provides system values and settings</span>
</p>

<h2 id="NAMESPACES">NAMESPACES</h2>

<p>The <code>IOGroup</code> class and the <code>iogroup_factory()</code> singleton accessor
function are members of the <code>namespace geopm</code>, but the full names,
<code>geopm::IOGroup</code> and <code>geopm::iogroup_factory()</code>, have been abbreviated
in this manual.  Similarly, the <code>std::</code> namespace specifier has been
omitted from the interface definitions for the following standard
types: <code>std::vector</code>, <code>std::string</code>, <code>std::set</code>, and <code>std::function</code>,
to enable better rendering of this manual.</p>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p><strong>#include <a href="https://github.com/geopm/geopm/blob/dev/src/IOGroup.hpp">&lt;geopm/IOGroup.hpp></a></strong></p>

<p><code>Link with -lgeopm (MPI) or -lgeopmpolicy (non-MPI)</code></p>

<dl>
<dt><code>PluginFactory&lt;IOGroup> &amp;iogroup_factory(</code></dt><dd><p><code>void);</code></p></dd>
<dt><code>virtual set&lt;string> IOGroup::signal_names(</code></dt><dd><p><code>void) const = 0</code>;</p></dd>
<dt><code>virtual set&lt;string> IOGroup::control_names(</code></dt><dd><p><code>void) const = 0</code>;</p></dd>
<dt><code>virtual bool IOGroup::is_valid_signal(</code></dt><dd><p><code>const string &amp;</code><em>signal_name</em><code>) const = 0;</code></p></dd>
<dt><code>virtual bool IOGroup::is_valid_control(</code></dt><dd><p><code>const string &amp;</code><em>control_name</em><code>) const = 0;</code></p></dd>
<dt><code>virtual int IOGroup::signal_domain_type(</code></dt><dd><p><code>const string &amp;</code><em>signal_name</em><code>) const = 0;</code></p></dd>
<dt><code>virtual int IOGroup::control_domain_type(</code></dt><dd><p><code>const string &amp;</code><em>control_name</em><code>) const = 0;</code></p></dd>
<dt><code>virtual int IOGroup::push_signal(</code></dt><dd><p><code>const string &amp;</code><em>signal_name</em><code>,</code> <br />
<code>int</code> <em>domain_type</em><code>,</code> <br />
<code>int</code> <em>domain_idx</em><code>) = 0</code>;</p></dd>
<dt><code>virtual int IOGroup::push_control(</code></dt><dd><p><code>const string &amp;</code><em>control_name</em><code>,</code> <br />
<code>int</code> <em>domain_type</em><code>,</code> <br />
<code>int</code> <em>domain_idx</em><code>) = 0</code>;</p></dd>
<dt><code>virtual void IOGroup::read_batch(</code></dt><dd><p><code>void) = 0</code>;</p></dd>
<dt><code>virtual void IOGroup::write_batch(</code></dt><dd><p><code>void) = 0</code>;</p></dd>
<dt><code>virtual double IOGroup::sample(</code></dt><dd><p><code>int</code> <em>sample_idx</em><code>) = 0;</code></p></dd>
<dt><code>virtual void IOGroup::adjust(</code></dt><dd><p><code>int</code> <em>control_idx</em><code>,</code> <br />
<code>double</code> <em>setting</em><code>) = 0;</code></p></dd>
<dt><code>virtual double IOGroup::read_signal(</code></dt><dd><p><code>const string &amp;</code><em>signal_name</em><code>,</code> <br />
<code>int</code> <em>domain_type</em><code>,</code> <br />
<code>int</code> <em>domain_idx</em><code>) = 0;</code></p></dd>
<dt><code>virtual void IOGroup::write_control(</code></dt><dd><p><code>const string &amp;</code><em>control_name</em><code>,</code> <br />
<code>int</code> <em>domain_type</em><code>,</code> <br />
<code>int</code> <em>domain_idx</em><code>,</code> <br />
<code>double</code> <em>setting</em><code>) = 0;</code></p></dd>
<dt><code>virtual void IOGroup::save_control(</code></dt><dd><p><code>void) = 0</code>;</p></dd>
<dt><code>virtual void IOGroup::restore_control(</code></dt><dd><p><code>void) = 0</code>;</p></dd>
<dt><code>virtual function&lt;double(const vector&lt;double> &amp;)&gt; agg_function(</code></dt><dd><p><code>const string &amp;</code><em>signal_name</em><code>) const = 0;</code></p></dd>
<dt><code>virtual string signal_description(</code></dt><dd><p><code>const string &amp;</code><em>signal_name</em><code>) const = 0;</code></p></dd>
<dt><code>virtual string control_description(</code></dt><dd><p><code>const string &amp;</code><em>control_name</em><code>) const = 0;</code></p></dd>
</dl>


<h2 id="DESCRIPTION">DESCRIPTION</h2>

<p>The <code>IOGroup</code> class is an abstract pure virtual class that defines the high
level interface employed by plugins for sample input and control output.  An
<code>Agent</code>, provided by the <strong><a class="man-ref" href="GEOPM_CXX_MAN_Agent.3.html">geopm::Agent<span class="s">(3)</span></a></strong> class,  will define one or more
IOGroups in order to:</p>

<ol>
<li>Acquire the necessary sample data required for the Agent.</li>
<li>Perform the necessary control operations as specified by the Agent.</li>
</ol>


<p>Classes may derive from the <code>IOGroup</code> class in order to provide an <code>Agent</code> with
additional sample data or control hooks other than what is provided by GEOPM.
The pure virtual methods in this interface must be implemented by every
IOGroup.  If an IOGroup provides only signals, the methods related to controls
can have empty or degenerate implementations; the reverse is also true if an
IOGroup only provides controls.  In these cases, ensure that is_valid_signal()
or is_valid_control() returns false as appropriate, and that signal_names() or
control_names() returns an empty set.</p>

<p>GEOPM provides a number of built-in IOGroups for the most common
usages.  The list of built-in IOGroups is as follows:</p>

<ul>
<li><p><code>CpuinfoIOGroup</code>: Provides constants for CPU frequency limits.
 Discussed in <strong><a class="man-ref" href="GEOPM_CXX_MAN_CpuinfoIOGroup.3.html">geopm::CpuinfoIOGroup<span class="s">(3)</span></a></strong>.</p></li>
<li><p><code>MSRIOGroup</code>: Provides signals and controls based on MSRs.
Discussed in <strong><a class="man-ref" href="GEOPM_CXX_MAN_MSRIOGroup.3.html">geopm::MSRIOGroup<span class="s">(3)</span></a></strong>.</p></li>
<li><p><code>ProfileIOGroup</code>: Provides signals from the application.
Discussed in <strong><a class="man-ref" href="GEOPM_CXX_MAN_ProfileIOGroup.3.html">geopm::ProfileIOGroup<span class="s">(3)</span></a></strong>.</p></li>
<li><p><code>TimeIOGroup</code>: Provides a signal for the current time.  Discussed
in <strong><a class="man-ref" href="GEOPM_CXX_MAN_TimeIOGroup.3.html">geopm::TimeIOGroup<span class="s">(3)</span></a></strong>.</p></li>
</ul>


<p>The APIs discussed in <strong><a class="man-ref" href="GEOPM_CXX_MAN_PlatformIO.3.html">geopm::PlatformIO<span class="s">(3)</span></a></strong> with regard to signals and
controls are ultimately fulfilled by the individual IOGroups that implement
this interface.</p>

<p>If multiple IOGroups define signals or controls that have the same name, the
IOGroup that is loaded last will override the others.  This effectively means
that the last loaded IOGroup that defines a signal or control will fulfill
requests for that signal or control.</p>

<h2 id="TERMS">TERMS</h2>

<p>Below are some definitions of terms that are used to describe different parts
of the IOGroup interface.  Understanding these terms will help to interpret the
documentation about how to extend IOGroups.</p>

<dl>
<dt class="flush"><em>signal</em></dt><dd><p>Named parameter in SI units that can be measured.</p></dd>
<dt><em>control</em> </dt><dd><p>Named parameter in SI units that can be set.</p></dd>
<dt class="flush"><em>domain</em></dt><dd><p>The discrete component within a compute node where a signal or control is
applicable.  For more information see <strong><a class="man-ref" href="GEOPM_CXX_MAN_PlatformTopo.3.html">geopm::PlatformTopo<span class="s">(3)</span></a></strong>.</p></dd>
</dl>


<h2 id="FACTORY-ACCESSOR">FACTORY ACCESSOR</h2>

<dl>
<dt><code>iogroup_factory</code>()</dt><dd>This method returns the singleton accessor for the IOGroup factory.
Calling this method will create the factory if it does not already exist.
If this method is creating the factory, loading of the built-in IOGroups
will be attempted.  For more information see <strong><a class="man-ref" href="GEOPM_CXX_MAN_PlatformIO.3.html">geopm::PlatformIO<span class="s">(3)</span></a></strong>
and/or <strong><a class="man-ref" href="GEOPM_CXX_MAN_PluginFactory.3.html">geopm::PluginFactory<span class="s">(3)</span></a></strong>.</dd>
</dl>


<h2 id="CLASS-METHODS">CLASS METHODS</h2>

<ul>
<li><p><code>signal_names</code>(): Provides the list of all signals provided by the
<code>IOGroup</code>.  The set of strings that are returned can be passed as a
<code>signal_name</code> to all of the <code>IOGroup</code> methods that accept a <code>signal_name</code>
as an input parameter.</p></li>
<li><p><code>control_names</code>():
Provides the list of all controls provided by the <code>IOGroup</code>.  The set of
strings that are returned can be passed as a <code>control_name</code> to all of the
<code>IOGroup</code> methods that accept a <code>control_name</code> as an input parameter.</p></li>
<li><p><code>is_valid_signal</code>():
Tests if the signal_name refers to a signal supported by the
<code>IOGroup</code>.</p></li>
<li><p><code>is_valid_control</code>():
Test if control_name refers to a control supported by the IOGroup.</p></li>
<li><p><code>signal_domain_type</code>():
Query the domain for a named signal.</p></li>
<li><p><code>control_domain_type</code>():
Query the domain for a named control.</p></li>
<li><p><code>push_signal</code>():
Add a signal to the list of signals that is read by <code>read_batch</code>()
and sampled by <code>sample</code>().  This method should return a unique index
for each signal that can be utilized when calling <code>sample</code>().</p></li>
<li><p><code>push_control</code>():
Add a control to the list of controls that is written by
<code>write_batch</code>() and configured with <code>adjust</code>().  This method should
return a unique index for each control that can be utilized when calling
<code>control</code>().</p></li>
<li><p><code>read_batch</code>():
Read all pushed signals from the platform so that the next call to
<code>sample</code>() will reflect the updated data.  The intention is that
<code>read_batch</code>() will read the all of the <code>IOGroup</code>'s signals into memory once
per call.</p></li>
<li><p><code>write_batch</code>():
Write all of the pushed controls so that values previously given
to <code>adjust</code>() are written to the platform.</p></li>
<li><p><code>sample</code>():
Retrieve a signal value from the data read by the last call to
<code>read_batch</code>() for a particular signal previously pushed with
<code>push_signal</code>().</p></li>
<li><p><code>adjust</code>():
Adjust a setting for a particular control that was previously
pushed with <code>push_control</code>(). This adjustment will be written to
the platform on the next call to <code>write_batch</code>().</p></li>
<li><p><code>read_signal</code>():
Read from platform and interpret into SI units a signal given its
name and domain. Does <em>not</em> modify the values stored by calling
<code>read_batch</code>().</p></li>
<li><p><code>write_control</code>():
Interpret the setting and write setting to the platform.  Does not
modify the values stored by calling adjust().</p></li>
<li><p><code>save_control</code>(): Save the state of all controls so that any
subsequent changes made through the IOGroup can be undone with a
call to the <code>restore</code>() method.</p></li>
<li><p><code>restore_control</code>(): Restore all controls to values recorded in
previous call to the <code>save</code>() method.</p></li>
<li><p><code>agg_function</code>(): Return a function that should be used when
aggregating the given signal.  For more information see <strong><a class="man-ref" href="GEOPM_CXX_MAN_Agg.3.html">geopm::Agg<span class="s">(3)</span></a></strong>.</p></li>
<li><p><code>signal_description</code>(): Returns a description of the signal. This
string can be used by tools to generate help text for users of the
IOGroup.</p></li>
<li><p><code>control_description</code>(): Returns a description of the
control. This string can be used by tools to generate help text
for users of the IOGroup.</p></li>
</ul>


<h2 id="EXAMPLE">EXAMPLE</h2>

<p>Please see the <a href="https://github.com/geopm/geopm/tree/dev/tutorial/iogroup">GEOPM IOGroup
tutorial</a> for more
information.  That code is located in the GEOPM source under tutorial/iogroup.</p>

<p>Further documentation for this module can be found here:
<a href="https://geopm.github.io/dox/classgeopm_1_1_i_o_group.html" data-bare-link="true">https://geopm.github.io/dox/classgeopm_1_1_i_o_group.html</a></p>

<h2 id="COPYRIGHT">COPYRIGHT</h2>

<p>Copyright (c) 2015, 2016, 2017, 2018, Intel Corporation. All rights reserved.</p>

<h2 id="SEE-ALSO">SEE ALSO</h2>

<p><strong><a class="man-ref" href="geopm.7.html">geopm<span class="s">(7)</span></a></strong>,
<strong><a class="man-ref" href="GEOPM_CXX_MAN_Agg.3.html">geopm::Agg<span class="s">(3)</span></a></strong>,
<strong><a class="man-ref" href="GEOPM_CXX_MAN_CpuinfoIOGroup.3.html">geopm::CpuinfoIOGroup<span class="s">(3)</span></a></strong>,
<strong><a class="man-ref" href="GEOPM_CXX_MAN_MSRIOGroup.3.html">geopm::MSRIOGroup<span class="s">(3)</span></a></strong>,
<strong><a class="man-ref" href="GEOPM_CXX_MAN_PlatformIO.3.html">geopm::PlatformIO<span class="s">(3)</span></a></strong>,
<strong><a class="man-ref" href="GEOPM_CXX_MAN_ProfileIOGroup.3.html">geopm::ProfileIOGroup<span class="s">(3)</span></a></strong>,
<strong><a class="man-ref" href="GEOPM_CXX_MAN_TimeIOGroup.3.html">geopm::TimeIOGroup<span class="s">(3)</span></a></strong></p>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'>Intel Corporation</li>
    <li class='tc'>December 2018</li>
    <li class='tr'>geopm::IOGroup(3)</li>
  </ol>

  </div>
</body>
</html>
