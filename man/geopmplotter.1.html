<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>geopmplotter(1) - visualize reports and traces</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#NAME">NAME</a>
    <a href="#SYNOPSIS">SYNOPSIS</a>
    <a href="#DESCRIPTION">DESCRIPTION</a>
    <a href="#OPTIONS">OPTIONS</a>
    <a href="#ENVIRONMENT">ENVIRONMENT</a>
    <a href="#EXAMPLES">EXAMPLES</a>
    <a href="#COPYRIGHT">COPYRIGHT</a>
    <a href="#SEE-ALSO">SEE ALSO</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>geopmplotter(1)</li>
    <li class='tc'></li>
    <li class='tr'>geopmplotter(1)</li>
  </ol>

  <h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>geopmplotter</code> - <span class="man-whatis">visualize reports and traces</span>
</p>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p><code>geopmplotter</code>  [<em>OPTIONS</em>] [<em>PATH</em>]</p>

<h2 id="DESCRIPTION">DESCRIPTION</h2>

<p>Used to produce plots and other analysis files from report and/or trace files.
The <em>PATH</em> argument is the input path to be searched for report/trace files.
If <em>PATH</em> is not provided, the current working directory is used.</p>

<h2 id="OPTIONS">OPTIONS</h2>

<dl>
<dt><code>-h</code>, <code>--help</code></dt><dd><p>show help message and exit.</p></dd>
<dt><code>-r</code>, <code>--report_base</code> <em>REPORT_BASE</em></dt><dd><p>The base report string to be searched.  All files that are located in the <em>PATH</em> directory
that begin with <em>REPORT_BASE</em> will be selected and interpreted as report files.  If this
option is not specified then all files with the ".report" extension in <em>PATH</em> are selected.</p></dd>
<dt><code>-t</code>, <code>--trace_base</code> <em>TRACE_BASE</em></dt><dd><p>The base trace string to be searched. All files that are located in the <em>PATH</em> directory
that begin with <em>TRACE_BASE</em> will be selected and interpreted as trace files.  If this option
is not specified then all files with the ".trace" extension in <em>PATH</em> are selected.  If 'None'
is specified as the trace base then no trace files will be parsed.</p></dd>
<dt><code>-p</code>, <code>--plot_type</code> <em>bar</em>|<em>box</em>|<em>power</em>|<em>epoch</em>|<em>freq</em>|<em>debug</em></dt><dd><p>The type of plot to be generated (default: <em>bar</em>).  Multiple plots can
be specified by providing a comma separated list (e.g. -p bar,box).  The debug plot can be
used to explore parsed data from a Python command prompt.</p></dd>
<dt><code>-s</code>, <code>--shell</code></dt><dd><p>Drop to a python shell after plotting.  Useful for data analysis.</p></dd>
<dt><code>-c</code>, <code>--csv</code></dt><dd><p>Generate CSV files for the plotted data.</p></dd>
<dt><code>--normalize</code></dt><dd><p>Normalize the data that is plotted.  For per-node plots this will also use uniform node
names in the legend.</p></dd>
<dt><code>-o</code>, <code>--output_dir</code> <em>OUTPUT_DIR</em></dt><dd><p>The output directory where files generated from the plotter will go. (default: <em>figures</em>)</p></dd>
<dt><code>-O</code>, <code>--output_types</code> <em>svg</em>|<em>png</em>|<em>pdf</em>|<em>eps</em>|<em>ps</em></dt><dd><p>The file type(s) for the plot file output. Multiple file types can
be created simultaneously if a comma separated list of types is
provided (e.g. -o svg,eps,png). (default: <em>svg</em>)</p></dd>
<dt><code>-n</code>, <code>--profile_name</code> <em>PROFILE_NAME</em></dt><dd><p>Name of the profile to be used in file names / plot titles.
(default: <em>"Test Data"</em>)</p></dd>
<dt><code>-m</code>, <code>--misc_text</code> <em>MISC_TEXT</em></dt><dd><p>Text to be appended to the plot title.</p></dd>
<dt><code>-v</code>, <code>--verbose</code></dt><dd><p>Print debugging information.</p></dd>
<dt><code>--speedup</code></dt><dd><p>When a user requests barplots, plot the speedup instead of the raw data
value.</p></dd>
<dt><code>--ref_version</code> <em>VERSION</em></dt><dd><p>Use this version string as the reference dataset to compare the target against.</p></dd>
<dt><code>--ref_profile_name</code> <em>PROFILE_NAME</em></dt><dd><p>Use this profile name as the reference dataset to compare the target against.</p></dd>
<dt><code>--ref_plugin</code> <em>PLUGIN_NAME</em></dt><dd><p>Use this tree decider plugin as the reference dataset to compare the target
against. (default: <em>power_governing</em>)</p></dd>
<dt><code>--tgt_version</code> <em>VERSION</em></dt><dd><p>Use this version string as the target dataset to compare the reference against.</p></dd>
<dt><code>--tgt_name</code> <em>PROFILE_NAME</em></dt><dd><p>Use this profile name as the target dataset to compare the reference against.</p></dd>
<dt><code>--tgt_plugin</code> <em>PLUGIN_NAME</em></dt><dd><p>Use this tree decider plugin as the target dataset to compare the reference
against. (default: <em>power_balancing</em>)</p></dd>
<dt><code>--datatype</code> <em>runtime</em>|<em>energy</em>|<em>frequency</em>|<em>count</em></dt><dd><p>The datatype to be plotted. Only used for report file plots presently. (default: <em>runtime</em>)</p></dd>
<dt><code>--smooth</code> <em>NUM_SAMPLES</em></dt><dd><p>Perform a <em>NUM_SAMPLES</em> moving average on on the Y-axis data. Only used for
trace file plots presently. (default: <em>1</em>)</p></dd>
<dt><code>--analyze</code></dt><dd><p>Perform a basic analysis of the data plotted and save the statistics to a file.
This applies to all trace plots, and additionally does the following to these specific plots:</p>

<p><em>power</em>: Plot the power cap and the aggregate power for all the nodes.<br />
<em>epoch</em>: Adjust the Y-axis bounds to drop outlier data.</p></dd>
<dt><code>--min_drop</code> <em>BUDGET_WATTS</em></dt><dd><p>The minimum power budget for data to be included in the plot.  All data below this threshold
will be dropped.</p></dd>
<dt><code>--max_drop</code> <em>BUDGET_WATTS</em></dt><dd><p>The maximum power budget for data to be included in the plot.  All data above this threshold
will be dropped.</p></dd>
<dt><code>--base_clock</code> <em>FREQ_GHZ</em></dt><dd><p>The base clock frequency in GHz to be used when making calculations from the CLK counter data.</p></dd>
<dt><code>--focus_node</code> <em>NODE_NAME</em></dt><dd><p>The name of a node to focus on when generating per node plots.  This node's data will be highlighted
in red and will be drawn on top the other nodes.  Analysis data will still be drawn on top of this
line if enabled with <code>--analyze</code>.</p></dd>
<dt class="flush"><code>--show</code></dt><dd><p>This will display an interactive plot using the default Matplotlib backend.</p></dd>
<dt><code>--cache</code> <em>FILE_NAME</em></dt><dd><p>Use <em>FILE_NAME</em> as the prefix for data cache files to try to load.  If no files are found, data will
be parsed and cache files will be written in the CWD.  Glob patterns for report and trace files will
be ignored if the cache files do not exist.  In this case, all report files matching the "*report"
pattern and all trace files matching the "*trace-*" pattern will be parsed.  When used properly this
drastically speeds up the time taken to create plots.</p>

<p>WARNING: If the data used to generate the cache files changes, you must manually delete the
corresponding .p files.  That is, if <em>FILE_NAME</em> is "data", remove data_report.p and data_trace.p from
the CWD.</p></dd>
</dl>


<h2 id="ENVIRONMENT">ENVIRONMENT</h2>

<dl>
<dt><code>DISPLAY </code></dt><dd><p>Because the geopmplotter relies on Matplotlib backends for creating plots,
you may have to manually set this variable for proper functionality even if you
are not displaying the interactive plot with <code>-s</code>.  E.g.:</p>

<p>DISPLAY=:0 geopmplotter -v data</p></dd>
<dt><code>MPLBACKEND</code></dt><dd><p>As an alternative to the above, you can set your backend to "Agg" using either:</p>

<p>MPLBACKEND="Agg" geopmplotter -v data</p>

<p>Or you may make the change permanently in your matplotlibrc file  as
described here:<br />
<em>https://matplotlib.org/faq/usage_faq.html#what-is-a-backend</em>.</p>

<p>The plotter will try to use the default backend (TkAgg), and fall back to Agg automatically
if the default is not supported.  Additional backends can be used by setting MPLBACKEND
in the environment.</p></dd>
</dl>


<p>Using either of these options will prevent <code>--show</code> from working properly.</p>

<h2 id="EXAMPLES">EXAMPLES</h2>

<p>  Once the geopmpy modules are installed, you can invoke this utility directly from
  the command line.  You can either run the utility from inside a directory containing
  data, or from a remote directory.  Some examples follow:</p>

<p>  Running the utility from the CWD plot the bar and box plots for the current dataset.
  By default, this assumes you have data utilizing the "static_policy" and "power_balancing"
  plugins.  The verbose flag is added to show progress when parsing or plotting.</p>

<pre><code>geopmplotter -vp box,bar
</code></pre>

<p>  Plot the epoch loop time comparison, frequency, and power plots.  Note that this will
  parse all the trace files present in the CWD.  This could take a considerable amount
  of time for a large dataset.  Similar to the bar plot, the epoch plot assumes the
  data contains output from both the "static_policy" and "power_balancing" plugins.</p>

<pre><code>geopmplotter -vp epoch,freq,power
</code></pre>

<p>  To plot a single plugin, use the <code>--ref_plugin</code> and <code>--tgt_plugin</code> options:</p>

<pre><code>geopmplotter -vp epoch --ref_plugin static_policy --tgt_plugin static_policy
</code></pre>

<p>  Plot the trace based plots, though only parsing a subset of the trace files.  In this
  instance, the trace files are named based on the global power budget that was set
  at the beginning of the run (e.g. 160-...-trace-<var>NODENAME</var>).  This can be significantly
  faster to parse for large datasets.</p>

<pre><code>geopmplotter -vp epoch,freq,power -t "160*trace"
</code></pre>

<p>  The <code>--cache</code> flag can be used to save any parsed data into a Pickle file for expedited
  data loading on subsequent runs.  Since the plotter will only parse data based on the
  requested plots, to parse and cache all the report and trace data you must request a set
  of plots that require both types of files.  Presently the reports are needed for the bar
  and box plots while all other plots are based on the trace data.  The following requests
  the bar and frequency plots, and saves the parsed data in all_report.p and all_trace.p.</p>

<pre><code>geopmplotter -vp bar,freq --cache all
</code></pre>

<p>  If all_report.p or all_trace.p exist, they will be loaded and used.  Otherwise, the data
  will be parsed as usual and then saved in these files.  Utilizing the cache will dramatically
  speed up the time needed to create plots.  If you need to re-parse your data, remove these
  files.</p>

<p>  Plot everything utilizing the cache.</p>

<pre><code>geopmplotter -vp box,bar,epoch,freq,power --cache all
</code></pre>

<p>  Plot the speedup bar plot from 190W to 210W utilizing the cache.</p>

<pre><code>geopmplotter -vp bar --speedup --min_drop 190 --max_drop 210 --cache all
</code></pre>

<p>  Use <code>--analyze</code> with the power plot to include the aggregate power and the power cap
  line.</p>

<pre><code>geopmplotter -vp power --cache all --analyze
</code></pre>

<h2 id="COPYRIGHT">COPYRIGHT</h2>

<p>Copyright (c) 2015, 2016, 2017, 2018, 2019, 2020, Intel Corporation. All rights reserved.</p>

<h2 id="SEE-ALSO">SEE ALSO</h2>

<p><strong><a class="man-ref" href="geopm.7.html">geopm<span class="s">(7)</span></a></strong>,
<strong><a class="man-ref" href="geopmpy.7.html">geopmpy<span class="s">(7)</span></a></strong>,
<strong><span class="man-ref">geopmanalysis<span class="s">(1)</span></span></strong>,
<strong><a class="man-ref" href="geopmlaunch.1.html">geopmlaunch<span class="s">(1)</span></a></strong>,</p>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'>GEOPM 1.1.0+dev346gc6d64b3</li>
    <li class='tc'>June 2020</li>
    <li class='tr'>geopmplotter(1)</li>
  </ol>

  </div>
</body>
</html>
