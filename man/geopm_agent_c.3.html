<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>geopm_agent_c(3) - query information about available agents</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#NAME">NAME</a>
    <a href="#SYNOPSIS">SYNOPSIS</a>
    <a href="#DESCRIPTION">DESCRIPTION</a>
    <a href="#ERRORS">ERRORS</a>
    <a href="#COPYRIGHT">COPYRIGHT</a>
    <a href="#SEE-ALSO">SEE ALSO</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>geopm_agent_c(3)</li>
    <li class='tc'></li>
    <li class='tr'>geopm_agent_c(3)</li>
  </ol>

  <h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>geopm_agent_c</code> - <span class="man-whatis">query information about available agents</span>
</p>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p><strong>#include <a href="https://github.com/geopm/geopm/blob/dev/src/geopm_agent.h">&lt;geopm_agent.h></a></strong></p>

<p><code>Link with -lgeopm</code></p>

<dl>
<dt><code>int geopm_agent_supported(</code></dt><dd><p><code>const char *</code><em>agent_name</em><code>);</code></p></dd>
<dt><code>int geopm_agent_num_policy(</code></dt><dd><p><code>const char *</code><em>agent_name</em>, <br />
<code>int *</code><em>num_policy</em><code>);</code></p></dd>
<dt><code>int geopm_agent_policy_name(</code></dt><dd><p><code>const char *</code><em>agent_name</em>, <br />
<code>int</code> <em>policy_idx</em>, <br />
<code>size_t</code> <em>policy_name_max</em>, <br />
<code>char *</code><em>policy_name</em><code>);</code></p></dd>
<dt><code>int geopm_agent_policy_json(</code></dt><dd><p><code>const char *</code><em>agent_name</em>, <br />
<code>const double *</code><em>policy_array</em>, <br />
<code>size_t</code> <em>json_string_max</em>, <br />
<code>const char *</code><em>json_string</em><code>);</code></p></dd>
<dt><code>int geopm_agent_num_sample(</code></dt><dd><p><code>const char *</code><em>agent_name</em>, <br />
<code>int *</code><em>num_sample</em><code>);</code></p></dd>
<dt><code>int geopm_agent_sample_name(</code></dt><dd><p><code>const char *</code><em>agent_name</em>, <br />
<code>int</code> <em>sample_idx</em>, <br />
<code>size_t</code> <em>sample_name_max</em>, <br />
<code>char *</code><em>sample_name</em><code>);</code></p></dd>
<dt><code>int geopm_agent_num_avail(</code></dt><dd><p><code>int *</code><em>num_agent</em><code>);</code></p></dd>
<dt><code>int geopm_agent_name(</code></dt><dd><p><code>int</code> <em>agent_idx</em>, <br />
<code>size_t</code> <em>agent_name_max</em>, <br />
<code>char *</code><em>agent_name</em><code>);</code></p></dd>
<dt><code>int geopm_agent_enforce_policy(</code></dt><dd><p><code>void);</code></p></dd>
</dl>


<h2 id="DESCRIPTION">DESCRIPTION</h2>

<p>The <em>geopm_agent_c</em> interface is used to query GEOPM about agents on a
system and create static policies for those agents.  The interface
provides the ability to query about specific types of supported
agents, the policy parameters required by an agent, and the sample
parameters provided by an agent.  In addition, this interface provides
a way to create a JSON policy configuration file that will be parsed
by the GEOPM runtime for statically enforcing a job policy.</p>

<p>All functions described in this man page return an error code on failure and
zero upon success; see <a href="#ERRORS" title="ERRORS" data-bare-link="true">ERRORS</a> section below for details.</p>

<dl>
<dt><code>geopm_agent_supported</code>()</dt><dd><p>queries GEOPM to determine if <em>agent_name</em> is supported.  Returns zero if
an agent is supported, otherwise an error code is returned.</p></dd>
<dt><code>geopm_agent_num_policy</code>()</dt><dd><p>queries GEOPM for the number of policy parameters required by <em>agent_name</em>.
The result is placed in <em>num_policy</em>.  Returns zero if an agent is
supported, otherwise an error code is returned.</p></dd>
<dt><code>geopm_agent_policy_name</code>()</dt><dd><p>queries GEOPM for the name of a policy parameter occurring at index
<em>policy_idx</em> for <em>agent_name</em>.  The result is stored in <em>policy_name</em>.  The
number of bytes reserved for the output string is specified in
<em>policy_name_max</em>.  Returns zero if an agent is supported, the <em>policy_idx</em>
is in range, and the policy name can be stored in the output string
(<em>policy_name</em>).  Otherwise an error code is returned.</p></dd>
<dt><code>geopm_agent_policy_json</code>()</dt><dd><p>creates a JSON file based on the provided <em>policy_array</em> that can be used
for statically controlling the job policy for <em>agent_name</em>.  The output is
stored in the <em>json_string</em> buffer.  The number of bytes reserved for the
buffer is specified in <em>json_string_max</em>.</p></dd>
<dt><code>geopm_agent_num_sample</code>()</dt><dd><p>queries GEOPM for the number of sample parameters provided by <em>agent_name</em>.
The result is stored in <em>num_sample</em>.  Returns zero on success, otherwise
an error code is returned.</p></dd>
<dt><code>geopm_agent_sample_name</code>()</dt><dd><p>queries GEOPM for the name of a sample parameter occurring at index
<em>sample_idx</em> for <em>agent_name</em>.  The output is stored in the <em>sample_name</em>
buffer.  The number of bytes allocated for the output buffer is specified
in <em>sample_name_max</em>.  Returns zero if an agent is supported, the
<em>sample_idx</em> is in range, and the sample name can be stored in the output
string (<em>sample_name</em>).  Otherwise an error code is returned.</p></dd>
<dt><code>geopm_agent_num_avail</code>()</dt><dd><p>queries GEOPM for the number of currently available agents.  The output
is stored in <em>num_agent</em>.  Returns zero on success, otherwise
an error code is returned.</p></dd>
<dt><code>geopm_agent_name</code>()</dt><dd><p>queries GEOPM for the name of the agent occurring at index <em>agent_idx</em>.  The
result is stored in <em>agent_name</em>.  The number of bytes reserved for the
output string is specified in <em>agent_name_max</em>.  Returns zero if the
<em>agent_idx</em> is in range, and the agent name can be stored in the output
string (<em>agent_name</em>).  Otherwise an error code is returned.</p></dd>
<dt><code>geopm_agent_enforce_policy</code>()</dt><dd><p>queries the environment for the <code>GEOPM_AGENT</code> and <code>GEOPM_POLICY</code>
and enforces the policy for the agent by writing controls to the
platform (see <strong><a class="man-ref" href="geopm_pio_c.3.html">geopm_pio_c<span class="s">(3)</span></a></strong>).  A resource manager can use
this function to enforce the GEOPM configured policy (see
<strong><a class="man-ref" href="geopm.7.html">geopm<span class="s">(7)</span></a></strong>) prior to releasing compute nodes for a user
allocation.  More generally this function allows one-time use of
an Agent outside of the context of an MPI runtime or the use of a
GEOPM Controller.  Note that the enforcement of the policy will
not support any of the dynamic features of the agent.  For instance,
calling <code>geopm_agent_enforce_policy</code>() for the power_balancer will
set all nodes to the same power limit, and those limits will not
vary with time.</p></dd>
</dl>


<h2 id="ERRORS">ERRORS</h2>

<p>All functions described on this man page return an error code.  See
<strong><a class="man-ref" href="geopm_error.3.html">geopm_error<span class="s">(3)</span></a></strong> for a full description of the error numbers and how
to convert them to strings.</p>

<h2 id="COPYRIGHT">COPYRIGHT</h2>

<p>Copyright (c) 2015, 2016, 2017, 2018, 2019, Intel Corporation. All rights reserved.</p>

<h2 id="SEE-ALSO">SEE ALSO</h2>

<p><strong><a class="man-ref" href="geopm.7.html">geopm<span class="s">(7)</span></a></strong>,
<strong><a class="man-ref" href="geopm_agent_energy_efficient.7.html">geopm_agent_energy_efficient<span class="s">(7)</span></a></strong>,
<strong><a class="man-ref" href="geopm_agent_monitor.7.html">geopm_agent_monitor<span class="s">(7)</span></a></strong>,
<strong><a class="man-ref" href="geopm_agent_power_balancer.7.html">geopm_agent_power_balancer<span class="s">(7)</span></a></strong>,
<strong><a class="man-ref" href="geopm_agent_power_governor.7.html">geopm_agent_power_governor<span class="s">(7)</span></a></strong>,
<strong><a class="man-ref" href="geopm_error.3.html">geopm_error<span class="s">(3)</span></a></strong>,
<strong><a class="man-ref" href="geopmagent.1.html">geopmagent<span class="s">(1)</span></a></strong>,
<strong><a class="man-ref" href="geopmlaunch.1.html">geopmlaunch<span class="s">(1)</span></a></strong></p>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'>GEOPM 1.0.0+dev46g300667f</li>
    <li class='tc'>June 2019</li>
    <li class='tr'>geopm_agent_c(3)</li>
  </ol>

  </div>
</body>
</html>
