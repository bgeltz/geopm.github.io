<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>geopm: geopm::ApplicationRecordLog Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">geopm
   &#160;<span id="projectnumber">2.0.0~rc2+dev70g3e790228</span>
   </div>
   <div id="projectbrief">GEOPM - Global Extensible Open Power Manager</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegeopm.html">geopm</a></li><li class="navelem"><a class="el" href="classgeopm_1_1_application_record_log.html">ApplicationRecordLog</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="classgeopm_1_1_application_record_log-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">geopm::ApplicationRecordLog Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides an abstraction for a shared memory buffer that can be used to pass entry, exit, epoch and short region events from <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> to <a class="el" href="classgeopm_1_1_application_sampler.html">ApplicationSampler</a>.  
 <a href="classgeopm_1_1_application_record_log.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_application_record_log_8hpp_source.html">ApplicationRecordLog.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for geopm::ApplicationRecordLog:</div>
<div class="dyncontent">
<div class="center"><img src="classgeopm_1_1_application_record_log__inherit__graph.png" border="0" usemap="#geopm_1_1_application_record_log_inherit__map" alt="Inheritance graph"/></div>
<map name="geopm_1_1_application_record_log_inherit__map" id="geopm_1_1_application_record_log_inherit__map">
<area shape="rect" id="node2" href="classgeopm_1_1_application_record_log_imp.html" title="geopm::ApplicationRecord\lLogImp" alt="" coords="15,80,190,121"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a68c514b546bfbda6b0863151198a8679"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#a68c514b546bfbda6b0863151198a8679">~ApplicationRecordLog</a> ()=default</td></tr>
<tr class="memdesc:a68c514b546bfbda6b0863151198a8679"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor for pure virtual base class.  <a href="#a68c514b546bfbda6b0863151198a8679">More...</a><br /></td></tr>
<tr class="separator:a68c514b546bfbda6b0863151198a8679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a689f4be34eed5fd37f411ef31980e8fc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#a689f4be34eed5fd37f411ef31980e8fc">set_process</a> (int process)=0</td></tr>
<tr class="memdesc:a689f4be34eed5fd37f411ef31980e8fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the process identifier.  <a href="#a689f4be34eed5fd37f411ef31980e8fc">More...</a><br /></td></tr>
<tr class="separator:a689f4be34eed5fd37f411ef31980e8fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45d668f0d116586606c3fe8b10d475ea"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#a45d668f0d116586606c3fe8b10d475ea">set_time_zero</a> (const geopm_time_s &amp;time)=0</td></tr>
<tr class="memdesc:a45d668f0d116586606c3fe8b10d475ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the reference time.  <a href="#a45d668f0d116586606c3fe8b10d475ea">More...</a><br /></td></tr>
<tr class="separator:a45d668f0d116586606c3fe8b10d475ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2b9870119556b9e9c519ced2163b183"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#ae2b9870119556b9e9c519ced2163b183">enter</a> (uint64_t hash, const geopm_time_s &amp;time)=0</td></tr>
<tr class="memdesc:ae2b9870119556b9e9c519ced2163b183"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a message in the log defining a region entry.  <a href="#ae2b9870119556b9e9c519ced2163b183">More...</a><br /></td></tr>
<tr class="separator:ae2b9870119556b9e9c519ced2163b183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42954343736fd33d1116e89ef453d965"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965">exit</a> (uint64_t hash, const geopm_time_s &amp;time)=0</td></tr>
<tr class="memdesc:a42954343736fd33d1116e89ef453d965"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a message in the log defining a region exit.  <a href="#a42954343736fd33d1116e89ef453d965">More...</a><br /></td></tr>
<tr class="separator:a42954343736fd33d1116e89ef453d965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac239978d64c857f0106aed3fabb2191e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#ac239978d64c857f0106aed3fabb2191e">epoch</a> (const geopm_time_s &amp;time)=0</td></tr>
<tr class="memdesc:ac239978d64c857f0106aed3fabb2191e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a message in the log defining an epoch event.  <a href="#ac239978d64c857f0106aed3fabb2191e">More...</a><br /></td></tr>
<tr class="separator:ac239978d64c857f0106aed3fabb2191e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eda8963368dc8a78f6f199899ec125b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b">dump</a> (std::vector&lt; <a class="el" href="structgeopm_1_1record__s.html">record_s</a> &gt; &amp;records, std::vector&lt; <a class="el" href="structgeopm_1_1short__region__s.html">short_region_s</a> &gt; &amp;short_regions)=0</td></tr>
<tr class="memdesc:a2eda8963368dc8a78f6f199899ec125b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all events that have occurred since the last call to <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>.  <a href="#a2eda8963368dc8a78f6f199899ec125b">More...</a><br /></td></tr>
<tr class="separator:a2eda8963368dc8a78f6f199899ec125b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a8f0145ecab6cee486479e0666ac945aa"><td class="memItemLeft" align="right" valign="top">static std::unique_ptr&lt; <a class="el" href="classgeopm_1_1_application_record_log.html">ApplicationRecordLog</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#a8f0145ecab6cee486479e0666ac945aa">make_unique</a> (std::shared_ptr&lt; SharedMemory &gt; shmem)</td></tr>
<tr class="memdesc:a8f0145ecab6cee486479e0666ac945aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factory constructor.  <a href="#a8f0145ecab6cee486479e0666ac945aa">More...</a><br /></td></tr>
<tr class="separator:a8f0145ecab6cee486479e0666ac945aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae547f480d531482516b3feb32ca2782d"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#ae547f480d531482516b3feb32ca2782d">buffer_size</a> (void)</td></tr>
<tr class="memdesc:ae547f480d531482516b3feb32ca2782d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the shared memory size requirement.  <a href="#ae547f480d531482516b3feb32ca2782d">More...</a><br /></td></tr>
<tr class="separator:ae547f480d531482516b3feb32ca2782d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008886b1d307830ba85b5f4e2dc831b0"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#a008886b1d307830ba85b5f4e2dc831b0">max_record</a> (void)</td></tr>
<tr class="memdesc:a008886b1d307830ba85b5f4e2dc831b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the maximum number of records.  <a href="#a008886b1d307830ba85b5f4e2dc831b0">More...</a><br /></td></tr>
<tr class="separator:a008886b1d307830ba85b5f4e2dc831b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cec095ab665c242e21751ea537783ed"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#a6cec095ab665c242e21751ea537783ed">max_region</a> (void)</td></tr>
<tr class="memdesc:a6cec095ab665c242e21751ea537783ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the maximum number of short region events.  <a href="#a6cec095ab665c242e21751ea537783ed">More...</a><br /></td></tr>
<tr class="separator:a6cec095ab665c242e21751ea537783ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ab75cfd48ed898ef2ad9eb97b9f6139c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#ab75cfd48ed898ef2ad9eb97b9f6139c2">ApplicationRecordLog</a> ()=default</td></tr>
<tr class="separator:ab75cfd48ed898ef2ad9eb97b9f6139c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:aa4604eb2faf88f782ce97f0d97cbafc0"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#aa4604eb2faf88f782ce97f0d97cbafc0">M_LAYOUT_SIZE</a> = 49192</td></tr>
<tr class="separator:aa4604eb2faf88f782ce97f0d97cbafc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afde06011487bb677f9a8360932f4e814"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#afde06011487bb677f9a8360932f4e814">M_MAX_RECORD</a> = 1024</td></tr>
<tr class="separator:afde06011487bb677f9a8360932f4e814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a460e8a7faf7ef87cbcad4a5dfc0deb0e"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_application_record_log.html#a460e8a7faf7ef87cbcad4a5dfc0deb0e">M_MAX_REGION</a> = <a class="el" href="classgeopm_1_1_application_record_log.html#afde06011487bb677f9a8360932f4e814">M_MAX_RECORD</a> + 1</td></tr>
<tr class="separator:a460e8a7faf7ef87cbcad4a5dfc0deb0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides an abstraction for a shared memory buffer that can be used to pass entry, exit, epoch and short region events from <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> to <a class="el" href="classgeopm_1_1_application_sampler.html">ApplicationSampler</a>. </p>
<p>This class provides a compression of short running regions to avoid overwhelming the controller with too many records.</p>
<p>If the <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> calls entry() and then <a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965" title="Create a message in the log defining a region exit. ">exit()</a> for the same region hash within a control interval (between two calls to <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>) the entry event is converted into a short region event. All future pairs of entry() and <a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965" title="Create a message in the log defining a region exit. ">exit()</a> using this hash but prior to the next <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a> call will be aggregated into this short region event.</p>
<p>If a region hash was observed as a short region during a control interval (it was both entered and exited), but the <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a> call occurs prior to an <a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965" title="Create a message in the log defining a region exit. ">exit()</a> call that would close the region, the subsequent <a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965" title="Create a message in the log defining a region exit. ">exit()</a> call to this region will be classified as a short region event and the intervening interval of time will be recorded in this event created by the <a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965" title="Create a message in the log defining a region exit. ">exit()</a> call.</p>
<p>There is a loss of information when a region is entered and exited within one control loop when compared to the case where a <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a> call is made between an entry() and <a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965" title="Create a message in the log defining a region exit. ">exit()</a> call. In the former case, the exact timestamp associated with all region exit and entry events for a particular hash that occur after the first <a class="el" href="classgeopm_1_1_application_record_log.html#ae2b9870119556b9e9c519ced2163b183" title="Create a message in the log defining a region entry. ">enter()</a> call for that hash and prior to the next <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a> call are lost. The short region event records the number of calls to the hashed region and the total amount of time in the region, but the exact sequence and timing of events following the first <a class="el" href="classgeopm_1_1_application_record_log.html#ae2b9870119556b9e9c519ced2163b183" title="Create a message in the log defining a region entry. ">enter()</a> is not recorded. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a68c514b546bfbda6b0863151198a8679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68c514b546bfbda6b0863151198a8679">&#9670;&nbsp;</a></span>~ApplicationRecordLog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual geopm::ApplicationRecordLog::~ApplicationRecordLog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor for pure virtual base class. </p>

</div>
</div>
<a id="ab75cfd48ed898ef2ad9eb97b9f6139c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab75cfd48ed898ef2ad9eb97b9f6139c2">&#9670;&nbsp;</a></span>ApplicationRecordLog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">geopm::ApplicationRecordLog::ApplicationRecordLog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae547f480d531482516b3feb32ca2782d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae547f480d531482516b3feb32ca2782d">&#9670;&nbsp;</a></span>buffer_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t geopm::ApplicationRecordLog::buffer_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the shared memory size requirement. </p>
<p>This method returns the value to use when sizing the SharedMemory object used to construct the <a class="el" href="classgeopm_1_1_application_record_log.html" title="Provides an abstraction for a shared memory buffer that can be used to pass entry, exit, epoch and short region events from Profile to ApplicationSampler. ">ApplicationRecordLog</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>Size requirement for SharedMemory object. </dd></dl>

</div>
</div>
<a id="a2eda8963368dc8a78f6f199899ec125b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eda8963368dc8a78f6f199899ec125b">&#9670;&nbsp;</a></span>dump()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void geopm::ApplicationRecordLog::dump </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structgeopm_1_1record__s.html">record_s</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structgeopm_1_1short__region__s.html">short_region_s</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>short_regions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get all events that have occurred since the last call to <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>. </p>
<p>Called by the <a class="el" href="classgeopm_1_1_application_sampler.html">ApplicationSampler</a> to gather all records that have been created by the <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> object since the last time the method was called. The call effectively removes all of the records and short region data from the table.</p>
<p>For optimal performance the user should reserve space in the output vectors using the <a class="el" href="classgeopm_1_1_application_record_log.html#a008886b1d307830ba85b5f4e2dc831b0" title="Gets the maximum number of records. ">max_record()</a> and <a class="el" href="classgeopm_1_1_application_record_log.html#a6cec095ab665c242e21751ea537783ed" title="Gets the maximum number of short region events. ">max_region()</a> static methods: </p><pre class="fragment">records.reserve(ApplicationRecordLog::max_record());
short_regions.reserve(ApplicationRecordLog::max_region());
</pre><p>Note that the "signal" in any sort region events in the records output vector is the index into the short_regions output vector, and the length of the short_regions vector will be equal to the number of events with type "EVENT_SHORT_REGION" in the records output vector.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">records</td><td>Vector of records written since last <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">short_regions</td><td>Vector of short region data about any short regions events in the records output vector. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classgeopm_1_1_application_record_log_imp.html#adb0ad697ebacbdefb6df22f79f88b729">geopm::ApplicationRecordLogImp</a>.</p>

</div>
</div>
<a id="ae2b9870119556b9e9c519ced2163b183"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2b9870119556b9e9c519ced2163b183">&#9670;&nbsp;</a></span>enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void geopm::ApplicationRecordLog::enter </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geopm_time_s &amp;&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a message in the log defining a region entry. </p>
<p>Called by the <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> object when a region is entered. This creates a <a class="el" href="structgeopm_1_1record__s.html" title="Record of an application event. ">record_s</a> in the log indicating entry if the region is entered for the first time since the last <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a> call, or it sets the start time for a short region if the region was entered and exited since the last call to <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hash</td><td>The region hash that is entered.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>The timestamp when the entry event occurred. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classgeopm_1_1_application_record_log_imp.html#a415d1b2909b226fa2d3a499f42bfb64a">geopm::ApplicationRecordLogImp</a>.</p>

</div>
</div>
<a id="ac239978d64c857f0106aed3fabb2191e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac239978d64c857f0106aed3fabb2191e">&#9670;&nbsp;</a></span>epoch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void geopm::ApplicationRecordLog::epoch </td>
          <td>(</td>
          <td class="paramtype">const geopm_time_s &amp;&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a message in the log defining an epoch event. </p>
<p>Called by the <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> object when an epoch event occurs. This creates a <a class="el" href="structgeopm_1_1record__s.html" title="Record of an application event. ">record_s</a> in the log indicating that an epoch event occurred.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>[in] The timestamp when the epoch event occurred. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classgeopm_1_1_application_record_log_imp.html#abee28efa5c23ca44e67f7b7614cbdda4">geopm::ApplicationRecordLogImp</a>.</p>

</div>
</div>
<a id="a42954343736fd33d1116e89ef453d965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42954343736fd33d1116e89ef453d965">&#9670;&nbsp;</a></span>exit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void geopm::ApplicationRecordLog::exit </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geopm_time_s &amp;&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a message in the log defining a region exit. </p>
<p>Called by the <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> object when a region is exited. This creates a <a class="el" href="structgeopm_1_1record__s.html" title="Record of an application event. ">record_s</a> in the log indicating exit if the matching entry for the region was called prior to the last <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a> call. If the region was entered since the last call to <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>, the first entry event will be converted into a short region event. The call to <a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965" title="Create a message in the log defining a region exit. ">exit()</a> for short regions has the effect of updating the short region event time and count values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>[in] The region hash that was exited.</td></tr>
    <tr><td class="paramname">time</td><td>[in] The timestamp when the exit event occurred. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classgeopm_1_1_application_record_log_imp.html#ae08f20e72e05a44fcc6276ebff8f9e86">geopm::ApplicationRecordLogImp</a>.</p>

</div>
</div>
<a id="a8f0145ecab6cee486479e0666ac945aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f0145ecab6cee486479e0666ac945aa">&#9670;&nbsp;</a></span>make_unique()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classgeopm_1_1_application_record_log.html">ApplicationRecordLog</a> &gt; geopm::ApplicationRecordLog::make_unique </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; SharedMemory &gt;&#160;</td>
          <td class="paramname"><em>shmem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Factory constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">shmem</td><td>Shared memory object of at least the size returned by <a class="el" href="classgeopm_1_1_application_record_log.html#ae547f480d531482516b3feb32ca2782d" title="Gets the shared memory size requirement. ">buffer_size()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a008886b1d307830ba85b5f4e2dc831b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a008886b1d307830ba85b5f4e2dc831b0">&#9670;&nbsp;</a></span>max_record()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t geopm::ApplicationRecordLog::max_record </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the maximum number of records. </p>
<p>This method returns the value to use when reserving elements in the records vector passed to <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>The maximum length of the records vector after a call to <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>. </dd></dl>

</div>
</div>
<a id="a6cec095ab665c242e21751ea537783ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cec095ab665c242e21751ea537783ed">&#9670;&nbsp;</a></span>max_region()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t geopm::ApplicationRecordLog::max_region </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the maximum number of short region events. </p>
<p>This method returns the value to use when reserving elements in the short_regions vector passed to <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>The maximum length of the short_regions vector after a call to <a class="el" href="classgeopm_1_1_application_record_log.html#a2eda8963368dc8a78f6f199899ec125b" title="Get all events that have occurred since the last call to dump(). ">dump()</a>. </dd></dl>

</div>
</div>
<a id="a689f4be34eed5fd37f411ef31980e8fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a689f4be34eed5fd37f411ef31980e8fc">&#9670;&nbsp;</a></span>set_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void geopm::ApplicationRecordLog::set_process </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>process</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the process identifier. </p>
<p>Called by the <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> to set the process identifier that will be used to tag all control messages. This method must be called prior to the <a class="el" href="classgeopm_1_1_application_record_log.html#ae2b9870119556b9e9c519ced2163b183" title="Create a message in the log defining a region entry. ">enter()</a>, <a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965" title="Create a message in the log defining a region exit. ">exit()</a> or <a class="el" href="classgeopm_1_1_application_record_log.html#ac239978d64c857f0106aed3fabb2191e" title="Create a message in the log defining an epoch event. ">epoch()</a> methods. The value provided is any integer unique to the compute node that identifies the caller of the profile interface. Commonly this is the MPI rank, but could also be the linux process ID for a parent thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">process</td><td>The process identifier. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classgeopm_1_1_application_record_log_imp.html#a59c69b3500fb262b6133f75b04d8d4ea">geopm::ApplicationRecordLogImp</a>.</p>

</div>
</div>
<a id="a45d668f0d116586606c3fe8b10d475ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45d668f0d116586606c3fe8b10d475ea">&#9670;&nbsp;</a></span>set_time_zero()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void geopm::ApplicationRecordLog::set_time_zero </td>
          <td>(</td>
          <td class="paramtype">const geopm_time_s &amp;&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the reference time. </p>
<p>Called by the <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> to set the reference time that is used to construct the time element of a <a class="el" href="structgeopm_1_1record__s.html" title="Record of an application event. ">record_s</a>. This method must be called prior to the <a class="el" href="classgeopm_1_1_application_record_log.html#ae2b9870119556b9e9c519ced2163b183" title="Create a message in the log defining a region entry. ">enter()</a>, <a class="el" href="classgeopm_1_1_application_record_log.html#a42954343736fd33d1116e89ef453d965" title="Create a message in the log defining a region exit. ">exit()</a> or <a class="el" href="classgeopm_1_1_application_record_log.html#ac239978d64c857f0106aed3fabb2191e" title="Create a message in the log defining an epoch event. ">epoch()</a> methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>The timestamp when the profiled process began. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classgeopm_1_1_application_record_log_imp.html#ae52384eae8e50a97bc9d917d38da9798">geopm::ApplicationRecordLogImp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa4604eb2faf88f782ce97f0d97cbafc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4604eb2faf88f782ce97f0d97cbafc0">&#9670;&nbsp;</a></span>M_LAYOUT_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t geopm::ApplicationRecordLog::M_LAYOUT_SIZE = 49192</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afde06011487bb677f9a8360932f4e814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afde06011487bb677f9a8360932f4e814">&#9670;&nbsp;</a></span>M_MAX_RECORD</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int geopm::ApplicationRecordLog::M_MAX_RECORD = 1024</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a460e8a7faf7ef87cbcad4a5dfc0deb0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a460e8a7faf7ef87cbcad4a5dfc0deb0e">&#9670;&nbsp;</a></span>M_MAX_REGION</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int geopm::ApplicationRecordLog::M_MAX_REGION = <a class="el" href="classgeopm_1_1_application_record_log.html#afde06011487bb677f9a8360932f4e814">M_MAX_RECORD</a> + 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_application_record_log_8hpp_source.html">ApplicationRecordLog.hpp</a></li>
<li>src/<a class="el" href="_application_record_log_8cpp.html">ApplicationRecordLog.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
