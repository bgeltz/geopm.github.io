<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>geopm: src/PowerBalancer.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">geopm
   &#160;<span id="projectnumber">2.0.0~rc2+dev57g50d712b5</span>
   </div>
   <div id="projectbrief">GEOPM - Global Extensible Open Power Manager</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">PowerBalancer.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_power_balancer_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2015 - 2022, Intel Corporation</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * SPDX-License-Identifier: BSD-3-Clause</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#ifndef POWERBALANCER_HPP_INCLUDE</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#define POWERBALANCER_HPP_INCLUDE</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacegeopm.html">geopm</a></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;{</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="classgeopm_1_1_power_balancer.html">   17</a></span>&#160;    <span class="keyword">class </span><a class="code" href="classgeopm_1_1_power_balancer.html">PowerBalancer</a></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    {</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <span class="keyword">public</span>:</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;            <a class="code" href="classgeopm_1_1_power_balancer.html#a990b8da3a1c2a3a8f2986fbed9f1f8e2">PowerBalancer</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;            <span class="keyword">virtual</span> <a class="code" href="classgeopm_1_1_power_balancer.html#a4599b55e3f9b129927461e6dea779eed">~PowerBalancer</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_power_balancer.html#a58b198100093c8cd3563dc1114e149c1">power_cap</a>(<span class="keywordtype">double</span> cap) = 0;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classgeopm_1_1_power_balancer.html#a58b198100093c8cd3563dc1114e149c1">power_cap</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classgeopm_1_1_power_balancer.html#aaf84174bff51eddc5ab995ff6992b75d">power_limit</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_power_balancer.html#ab1241a9b3105bc51cc9a50f897cdb9d1">power_limit_adjusted</a>(<span class="keywordtype">double</span> limit) = 0;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classgeopm_1_1_power_balancer.html#a7c5660af0029b304ed90c0b1b557932e">is_runtime_stable</a>(<span class="keywordtype">double</span> measured_runtime) = 0;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classgeopm_1_1_power_balancer.html#a543328bb4f42dc573d9ca5cff470c4ea">runtime_sample</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_power_balancer.html#a46013a55e94d8b0c795b904088a286c2">calculate_runtime_sample</a>(<span class="keywordtype">void</span>) = 0;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_power_balancer.html#a7c23de5386f1d7be2c8d09d53f2c4e9d">target_runtime</a>(<span class="keywordtype">double</span> largest_runtime) = 0;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classgeopm_1_1_power_balancer.html#a9ddcd8d50f9c64c905641a79d2c87517">is_target_met</a>(<span class="keywordtype">double</span> measured_runtime) = 0;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classgeopm_1_1_power_balancer.html#a4dc53811113f4cb2c07c53859a09052b">power_slack</a>(<span class="keywordtype">void</span>) = 0;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keyword">static</span> std::unique_ptr&lt;PowerBalancer&gt; <a class="code" href="classgeopm_1_1_power_balancer.html#a77416cf4c4099d1e630f20f66fde4b4c">make_unique</a>(<span class="keywordtype">double</span> ctl_latency);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keyword">static</span> std::shared_ptr&lt;PowerBalancer&gt; <a class="code" href="classgeopm_1_1_power_balancer.html#a3ba4d60f2cecb84be79e6536cf822fd4">make_shared</a>(<span class="keywordtype">double</span> ctl_latency);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    };</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="classgeopm_1_1_power_balancer_html_a990b8da3a1c2a3a8f2986fbed9f1f8e2"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a990b8da3a1c2a3a8f2986fbed9f1f8e2">geopm::PowerBalancer::PowerBalancer</a></div><div class="ttdeci">PowerBalancer()=default</div><div class="ttdoc">Construct a IPowerBalancer object. </div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html">geopm::PowerBalancer</a></div><div class="ttdoc">Stay within a power cap but redistribute power to optimize performance. An average per compute node p...</div><div class="ttdef"><b>Definition:</b> PowerBalancer.hpp:17</div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_ab1241a9b3105bc51cc9a50f897cdb9d1"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#ab1241a9b3105bc51cc9a50f897cdb9d1">geopm::PowerBalancer::power_limit_adjusted</a></div><div class="ttdeci">virtual void power_limit_adjusted(double limit)=0</div><div class="ttdoc">Notify power balancer that a new limit has been set with the governor. </div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a4599b55e3f9b129927461e6dea779eed"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a4599b55e3f9b129927461e6dea779eed">geopm::PowerBalancer::~PowerBalancer</a></div><div class="ttdeci">virtual ~PowerBalancer()=default</div><div class="ttdoc">Destroy a IPowerBalancer object. </div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_aaf84174bff51eddc5ab995ff6992b75d"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#aaf84174bff51eddc5ab995ff6992b75d">geopm::PowerBalancer::power_limit</a></div><div class="ttdeci">virtual double power_limit(void) const =0</div><div class="ttdoc">Returns the current power limit prescribed for this node. </div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a46013a55e94d8b0c795b904088a286c2"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a46013a55e94d8b0c795b904088a286c2">geopm::PowerBalancer::calculate_runtime_sample</a></div><div class="ttdeci">virtual void calculate_runtime_sample(void)=0</div><div class="ttdoc">Sample the measured runtimes under the current power cap in the first phase of execution. This measurement will be aggregated across all compute nodes to find the largest runtime measured. </div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a7c5660af0029b304ed90c0b1b557932e"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a7c5660af0029b304ed90c0b1b557932e">geopm::PowerBalancer::is_runtime_stable</a></div><div class="ttdeci">virtual bool is_runtime_stable(double measured_runtime)=0</div><div class="ttdoc">Update the object with a runtime measured under the current power limit and test if the current runti...</div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a9ddcd8d50f9c64c905641a79d2c87517"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a9ddcd8d50f9c64c905641a79d2c87517">geopm::PowerBalancer::is_target_met</a></div><div class="ttdeci">virtual bool is_target_met(double measured_runtime)=0</div><div class="ttdoc">During the second phase of execution the power limit is decreased until the epoch runtime on the comp...</div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a543328bb4f42dc573d9ca5cff470c4ea"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a543328bb4f42dc573d9ca5cff470c4ea">geopm::PowerBalancer::runtime_sample</a></div><div class="ttdeci">virtual double runtime_sample(void) const =0</div><div class="ttdoc">Return the expected execution time of an application epoch under the current power limit...</div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a3ba4d60f2cecb84be79e6536cf822fd4"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a3ba4d60f2cecb84be79e6536cf822fd4">geopm::PowerBalancer::make_shared</a></div><div class="ttdeci">static std::shared_ptr&lt; PowerBalancer &gt; make_shared(double ctl_latency)</div><div class="ttdoc">Returns a shared_ptr to a concrete object constructed using the underlying implementation. </div><div class="ttdef"><b>Definition:</b> PowerBalancer.cpp:23</div></div>
<div class="ttc" id="namespacegeopm_html"><div class="ttname"><a href="namespacegeopm.html">geopm</a></div><div class="ttdef"><b>Definition:</b> Accumulator.cpp:11</div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a58b198100093c8cd3563dc1114e149c1"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a58b198100093c8cd3563dc1114e149c1">geopm::PowerBalancer::power_cap</a></div><div class="ttdeci">virtual double power_cap(void) const =0</div><div class="ttdoc">The current power cap which cannot be exceeded without breaking contract that the average power budge...</div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a77416cf4c4099d1e630f20f66fde4b4c"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a77416cf4c4099d1e630f20f66fde4b4c">geopm::PowerBalancer::make_unique</a></div><div class="ttdeci">static std::unique_ptr&lt; PowerBalancer &gt; make_unique(double ctl_latency)</div><div class="ttdoc">Returns a unique_ptr to a concrete object constructed using the underlying implementation. </div><div class="ttdef"><b>Definition:</b> PowerBalancer.cpp:18</div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a4dc53811113f4cb2c07c53859a09052b"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a4dc53811113f4cb2c07c53859a09052b">geopm::PowerBalancer::power_slack</a></div><div class="ttdeci">virtual double power_slack(void)=0</div><div class="ttdoc">Query the difference between the last power cap setting and the current power limit. If this method is called and it returns zero then the trial delta used to lower the power limit is reduced by a factor of two. </div></div>
<div class="ttc" id="classgeopm_1_1_power_balancer_html_a7c23de5386f1d7be2c8d09d53f2c4e9d"><div class="ttname"><a href="classgeopm_1_1_power_balancer.html#a7c23de5386f1d7be2c8d09d53f2c4e9d">geopm::PowerBalancer::target_runtime</a></div><div class="ttdeci">virtual void target_runtime(double largest_runtime)=0</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
